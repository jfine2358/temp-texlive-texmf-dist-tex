%%
%% This is file `floatpag.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% floatpag.dtx  (with options: `package')
%% 
%% Copyright (C) 1999-2012 by Vytas Statulevi\v{c}ius <vytas@vtex.lt>
%% VTeX Ltd., Akademijos 4, Vilnius, Lithuania
%% http://www.vtex.lt/tex/download/macros/
%% --------------------------------------------------------------------------
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
%%
%% The macros, developed by Sigitas Tolu\v{s}is <sigitas@vtex.lt>,
%% were used in this package.
%%
%% The Current Maintainer of this work is Sigitas Tolu\v{s}is.
%%
%% PURPOSE: provides commands to apply different pagestyles
%%          to the full page floats.
%%
\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesPackage{floatpag}
    [2012/05/29 v1.1 Different pagestyles on float pages]
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{floatpag}
             [1999/04/29
                 FLOAT PAGESTYLE]
\def\floatpagestyle#1{\gdef\at@float@page{\thispagestyle{#1}}}
\def\rotfloatpagestyle#1{%
  \gdef\@r@f@pagestyle{#1}%
  \gdef\at@rotfloat@page{\thispagestyle{#1}}%
  }
\floatpagestyle{headings}
\rotfloatpagestyle{plain}
\def\thisfloatpagestyle#1{%
  \expandafter\expandafter\expandafter\gdef\expandafter
    \csname\number\@currbox @float\endcsname{\thispagestyle{#1}}\relax
  }
%% Modify |\x@float| - ordinary floats
\def\@xfloat #1[#2]{%
  \@nodocument
  \def \@captype {#1}%
   \def \@fps {#2}%
   \@onelevel@sanitize \@fps
   \def \reserved@b {!}%
   \ifx \reserved@b \@fps
     \@fpsadddefault
   \else
     \ifx \@fps \@empty
       \@fpsadddefault
     \fi
   \fi
   \ifhmode
     \@bsphack
     \@floatpenalty -\@Mii
   \else
     \@floatpenalty-\@Miii
   \fi
  \ifinner
     \@parmoderr\@floatpenalty\z@
  \else
    \@next\@currbox\@freelist
      {%
       \@tempcnta \sixt@@n
       \expandafter \@tfor \expandafter \reserved@a
         \expandafter :\expandafter =\@fps
         \do
          {%
           \if \reserved@a h%
             \ifodd \@tempcnta
             \else
               \advance \@tempcnta \@ne
             \fi
           \fi
           \if \reserved@a t%
             \@setfpsbit \tw@
           \fi
           \if \reserved@a b%
             \@setfpsbit 4%
           \fi
           \if \reserved@a p%
             \@setfpsbit 8%
           \fi
           \if \reserved@a !%
             \ifnum \@tempcnta>15
               \advance\@tempcnta -\sixt@@n\relax
             \fi
           \fi
           }%
       \@tempcntb \csname ftype@\@captype \endcsname
       \multiply \@tempcntb \@xxxii
       \advance \@tempcnta \@tempcntb
       \global \count\@currbox \@tempcnta
       \expandafter\expandafter\expandafter\gdef\expandafter
         \csname\number\@currbox @float\endcsname{\at@float@page}\relax
       }%
    \@fltovf
  \fi
  \global \setbox\@currbox
    \color@vbox
      \normalcolor
      \vbox \bgroup
        \hsize\columnwidth
        \@parboxrestore
        \@floatboxreset
  }
%% 2e rotating.sty v. 2.10:
\def\e@xrotfloat#1[#2]{%
  \@float{#1}[#2]%
  \thisfloatpagestyle{\@r@f@pagestyle}%
  \begin{lrbox}\rot@float@box
  \begin{minipage}\textheight
  }
%% 2.09 rotating.sty v. 1.6
\def\n@xrotfloat#1[#2]{%
  \ifhmode
    \@bsphack
    \@floatpenalty -\@Mii
  \else
   \@floatpenalty-\@Miii
  \fi
  \def\@captype{#1}%
  \ifinner
    \@parmoderr\@floatpenalty\z@
  \else
    \@next\@currbox\@freelist{\@tempcnta\csname ftype@#1\endcsname
      \multiply\@tempcnta\@xxxii\advance\@tempcnta\sixt@@n
      \@tfor \@tempa :=#2\do{%
        \if\@tempa h\advance\@tempcnta \@ne\fi
        \if\@tempa t\advance\@tempcnta \tw@\fi
        \if\@tempa b\advance\@tempcnta 4\relax\fi
        \if\@tempa p\advance\@tempcnta 8\relax\fi
        }%
      \global\count\@currbox\@tempcnta
      }%
    \@fltovf
  \fi
  \expandafter\expandafter\expandafter\gdef\expandafter
    \csname\number\@currbox @float\endcsname{\at@rotfloat@page}\relax
  \global\setbox\@currbox\vbox\bgroup
    \hsize\textheight
    \@parboxrestore
  }
%% Check for |rotating| version: 2e ar 209:
%% 1999.02.08 To be sure check at begin document.
\AtBeginDocument{%
\@ifpackageloaded{rotating}%
{\let\@xrotfloat\e@xrotfloat\let\n@xrotfloat\relax}%
{\let\@xrotfloat\n@xrotfloat\let\e@xrotfloat\relax}}%
%% "Hook" in the output procedure.
\def\spec@float#1{\expandafter\csname\number#1@float\endcsname
  \expandafter\expandafter\expandafter\gdef\expandafter\csname\number#1@float\endcsname{}%
  }
\def\@vtryfc#1{%
  \global\setbox\@outputbox\vbox{}%
  \let\@elt\@wtryfc
  \@flsucceed
  \let\@elt\spec@float
  \@flsucceed
  \global\setbox\@outputbox \vbox to\@colht{%
    \vskip \@fptop
    \vskip -\@fpsep
    \unvbox \@outputbox
    \vskip \@fpbot
    }%
  \let\@elt\relax
  \xdef#1{\@failedlist\@flfail}%
  \xdef\@freelist{\@freelist\@flsucceed}%
  }
\endinput
%%
%% End of file `floatpag.sty'.
