  %% shdoc.sty
  %% Copyright 2015 Simon M. Laube
  %
  % This work may be distributed and/or modified under the
  % conditions of the LaTeX Project Public License, either version 1.3
  % of this license or (at your option) any later version.
  % The latest version of this license is in
  %   http://www.latex-project.org/lppl.txt
  % and version 1.3 or later is part of all distributions of LaTeX
  % version 2005/12/01 or later.
  %
  % This work has the LPPL maintenance status `author maintained'.
  % 
  % The Current Maintainer of this work is S. M. Laube
  %
\ProvidesPackage{shdoc}
\NeedsTeXFormat{LaTeX2e}

\def\shdocversion{v1.2}


\typeout{-----------------------------------------------------------------}
\typeout{Package for documenting terminal operations by RL-Systems (c)}
\typeout{\shdocversion , 03/2015}
\typeout{-----------------------------------------------------------------}

\RequirePackage[dvipsnames]{xcolor}
\RequirePackage{float}
\RequirePackage{caption}
\RequirePackage{mdframed}



\newcounter{shlinenumber}
\setcounter{shlinenumber}{0}

%% New Float
\newfloat{sh}{tbph}{lsh}
\restylefloat*{sh}
\floatstyle{plain}
\floatname{sh}{Terminal~Session}
\captionsetup[sh]{position=bottom}
\newcommand{\listofsh}{\listof{sh}{List of Terminal Sessions}}
\makeatletter
\let\@shuser\relax
\let\@shmachine\relax
\def\shuser#1{\gdef\@shuser{#1}}
\def\shmachine#1{\gdef\@shmachine{#1}}
\long\def\shline#1#2{\ttfamily%
    \noindent\scriptsize\ifnum\value{shlinenumber}<10 0\theshlinenumber\else \theshlinenumber\fi\normalsize\ \ \textcolor{green!80!yellow}{\@shuser @\@shmachine}%
    \ \ifx&#1&%
        \textcolor{RoyalBlue}{\~\ \$}
    \else
        \textcolor{RoyalBlue}{#1\ \$}
    \fi\ #2\stepcounter{shlinenumber}\par 
}
\long\def\shoutput#1#2{\ttfamily%
    \noindent\scriptsize\ifnum\value{shlinenumber}<10 0\theshlinenumber\else \theshlinenumber\fi\normalsize \begin{tabular}{l l}\ifx&#1& \else\fcolorbox{white!60!gray}{white!60!gray}{[#1]}\fi
    & #2\stepcounter{shlinenumber}\end{tabular}\par  
}
\makeatother
\newmdenv[linecolor=white,backgroundcolor=gray,settings=\setcounter{shlinenumber}{1}]{shbox}