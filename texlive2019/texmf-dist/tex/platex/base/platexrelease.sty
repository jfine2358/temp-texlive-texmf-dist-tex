%%
%% This is file `platexrelease.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% plvers.dtx  (with options: `platexrelease')
%% platexrelease.dtx  (with options: `platexrelease')
%% plfonts.dtx  (with options: `platexrelease')
%% plcore.dtx  (with options: `platexrelease')
%% 
%% Copyright (c) 2016-2018 Japanese TeX Development Community
%% 
%% This file is part of the pLaTeX2e system (community edition).
%% -------------------------------------------------------------
%% 
%% File: plvers.dtx
\edef\p@known@latexreleaseversion
   {2018-12-01}
\edef\platexreleaseversion
   {2019-04-06}
\newif\if@plincludeinrelease
\@plincludeinreleasefalse
\def\plIncludeInRelease#1{%
  \if@plincludeinrelease
    \PackageError{platexrelease}
      {mis-matched \string\plIncludeInRelease}{}%
    \@plincludeinreleasefalse
  \fi
  \kernel@ifnextchar[%
  {\@plIncludeInRelease{#1}}
  {\@plIncludeInRelease{#1}[#1]}}
\def\@plIncludeInRelease#1[#2]{\@plIncludeInRele@se{#2}}
\def\@plIncludeInRele@se#1#2#3{%
  \toks@{[#1] #3}%
  \expandafter\ifx\csname\string#2+\@currname+plIIR\endcsname\relax
    \ifnum\expandafter\@parse@version#1//00\@nil
          >\expandafter\@parse@version\pfmtversion//00\@nil
      \GenericInfo{}{Skipping: \the\toks@}%
     \expandafter\expandafter\expandafter\@gobble@plIncludeInRelease
    \else
      \GenericInfo{}{Applying: \the\toks@}%
      \@plincludeinreleasetrue
      \expandafter\let\csname\string#2+\@currname+plIIR\endcsname\@empty
    \fi
  \else
    \GenericInfo{}{Already applied: \the\toks@}%
    \expandafter\@gobble@plIncludeInRelease
  \fi
}
\def\plEndIncludeInRelease{%
  \if@plincludeinrelease
    \@plincludeinreleasefalse
  \else
    \PackageError{platexrelease}
      {mis-matched \string\plEndIncludeInRelease}{}%
  \fi}
\long\def\@gobble@plIncludeInRelease#1\plEndIncludeInRelease{%
  \@plincludeinreleasefalse
  \@check@plIncludeInRelease#1\plIncludeInRelease
    \@check@plIncludeInRelease\@end@check@plIncludeInRelease}
\long\def\@check@plIncludeInRelease#1\plIncludeInRelease
  #2#3\@end@check@plIncludeInRelease{%
  \ifx\@check@plIncludeInRelease#2\else
    \PackageError{platexrelease}
      {skipped \string\plIncludeInRelease}{}%
  \fi}
%% File: platexrelease.dtx
\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{platexrelease}
          [2018/05/22 v1.0m latexrelease support for pLaTeX Kernel
              (including releases up to \platexreleaseversion)]
\RequirePackageWithOptions{latexrelease}
\ifnum\expandafter\@parse@version\latexreleaseversion//00\@nil
  >\expandafter\@parse@version\p@known@latexreleaseversion//00\@nil
  \PackageWarningNoLine{platexrelease}{%
    Version of `latexrelease' is newer than\MessageBreak
    what `platexrelease' knows}
\fi
\DeclareOption*{%
  \def\@plIncludeInRelease#1[#2]{\@plIncludeInRele@se{#1}}%
  \let\requestedplpatchdate\CurrentOption}
\DeclareOption{latest}{%
  \let\requestedplpatchdate\platexreleaseversion
  \AtEndOfPackage{\def\requestedpLaTeXdate{0}}}
\DeclareOption{current}{%
  \let\requestedplpatchdate\pfmtversion
  \AtEndOfPackage{\def\requestedpLaTeXdate{0}}}
\let\requestedplpatchdate\pfmtversion
\ProcessOptions\relax
\def\reserved@a{%
\edef\requestedpLaTeXdate{\the\count@}%
\reserved@b}
\def\reserved@b#1\\{%
\def\reserved@b{#1}%
\ifx\reserved@b\@empty\else
\PackageError{platexrelease}%
             {Unexpected option \requestedplpatchdate}%
             {The option must be of the form yyyy/mm/dd or yyyy-mm-dd}%
\fi}
\afterassignment\reserved@a
\count@\expandafter
  \@parse@version\expandafter0\requestedplpatchdate//00\@nil\\
\edef\currentpLaTeXdate{%
   \expandafter\@parse@version\pfmtversion//00\@nil}
\ifnum\requestedpLaTeXdate=\currentpLaTeXdate
\PackageWarningNoLine{platexrelease}{%
  Current format date selected, no patches applied}
\expandafter\endinput
\fi
\ifnum\currentpLaTeXdate
  >\expandafter\@parse@version\platexreleaseversion//00\@nil
\PackageWarningNoLine{platexrelease}{%
The current package is for an older pLaTeX format:\MessageBreak
pLaTeX \platexreleaseversion\space\MessageBreak
Obtain a newer version of this package!}
\expandafter\endinput
\fi
\ifnum\requestedpLaTeXdate
  >\expandafter\@parse@version\platexreleaseversion//00\@nil
\PackageWarningNoLine{platexrelease}{%
The current package is for pLaTeX \platexreleaseversion:\MessageBreak
It has no patches beyond that date\MessageBreak
There may be an updated version\MessageBreak
of this package available from CTAN}
\expandafter\endinput
\fi
\let\pfmtversion\requestedplpatchdate
\let\currentpLaTeXdate\requestedpLaTeXdate
\def\pliirpkg@ver@warn{%
      You selected pLaTeX2e <\pfmtversion>, but\MessageBreak
      this version of pLaTeX2e is known to have\MessageBreak
      some critical bugs. We advise you to\MessageBreak
      select another format date}
\plIncludeInRelease{2017/10/28}{\PackageWarning}{pLaTeX Info}%
  % * <2019-04-06>
  % * <2018-12-01>
  % * <2018-07-28>+1
  % * <2018-07-28>
  % * <2018-05-20>
  % * <2018-04-01>+2
  % * <2018-04-01>+1
  % * <2018-04-01>
  % * <2018/03/09>+1
  % * <2018/03/09>
  % * <2017/10/28>+4
\plEndIncludeInRelease
\plIncludeInRelease{2017/07/29}{\PackageWarning}{pLaTeX Info}%
  % * <2017/10/28>+3
  % * <2017/10/28>+2
  % * <2017/10/28>+1
  % * <2017/10/28>
  % * <2017/09/26>
  % * <2017/07/29>+1
  %   - Enabling \linebreak before prebreakpenalty caused
  %     ineffective \nolinebreak (fixed in <2017/10/28>+4)
  % * <2017/07/29>
  %   - Inhibit JFM glue in tabular cells resulted in
  %     misplaced right alignment (fixed in <2017/09/26>)
  \PackageWarningNoLine{platexrelease}{\pliirpkg@ver@warn}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/08}{\PackageWarning}{pLaTeX Info}%
  % * <2017/05/05>
  % * <2017/04/08>
  % * <2016/11/29>
  % * <2016/09/08>
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\PackageWarning}{pLaTeX Info}%
  % * <2016/09/03>
  %   - \footnotetext in vertical mode resulted in extra
  %     vertical space (fixed in <2016/09/08>)
  \PackageWarningNoLine{platexrelease}{\pliirpkg@ver@warn}
\plEndIncludeInRelease
\plIncludeInRelease{2016/07/01}{\PackageWarning}{pLaTeX Info}%
  % * <2016/07/01>
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\PackageWarning}{pLaTeX Info}%
  % * <2016/06/10>+1
  % * <2016/06/10>
  % * <2016/05/07>
  % * <2016/04/17>
  %   - Fix for non-zero baselineshift in accent composition
  %     was problematic (fixed in <2016/07/01>)
  \PackageWarningNoLine{platexrelease}{\pliirpkg@ver@warn}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\PackageWarning}{pLaTeX Info}%
  % * <2006/11/10>
\plEndIncludeInRelease
%% File: plfonts.dtx
\plIncludeInRelease{2017/04/08}{\ystrutbox}
                   {Add \ystrutbox}%
\newbox\ystrutbox
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\ystrutbox}
                   {Add \ystrutbox}%
\let\ystrutbox\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\strutbox}
                   {Add \strutbox}%
\def\strutbox{\iftdir\tstrutbox\else\ystrutbox\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\strutbox}
                   {Add \strutbox}%
\newbox\strutbox % emulation purpose only
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\strut}
                   {Use \ystrutbox}%
\def\strut{\relax
  \ifydir
    \ifmmode\copy\ystrutbox\else\unhcopy\ystrutbox\fi
  \else
    \ifmmode\copy\tstrutbox\else\unhcopy\tstrutbox\fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\strut}
                   {Use \ystrutbox}%
\def\strut{\relax
  \ifydir
    \ifmmode\copy\strutbox\else\unhcopy\strutbox\fi
  \else
    \ifmmode\copy\tstrutbox\else\unhcopy\tstrutbox\fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\ystrut}
                   {Add \ystrut}%
\def\ystrut{\relax\hbox{\yoko
    \ifmmode\copy\ystrutbox\else\unhcopy\ystrutbox\fi}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\ystrut}
                   {Add \ystrut}%
\let\ystrut\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2018/04/01}{\DeclareFontEncoding@}
                   {UTF-8 Encoding}%
\def\DeclareFontEncoding@#1#2#3{%
  \expandafter
  \ifx\csname T@#1\endcsname\relax
     \def\cdp@elt{\noexpand\cdp@elt}%
     \xdef\cdp@list{\cdp@list\cdp@elt{#1}%
                    {\default@family}{\default@series}%
                    {\default@shape}}%
     \expandafter\let\csname#1-cmd\endcsname\@changed@cmd
     \def\enc@elt{\noexpand\enc@elt}%
     \xdef\fenc@list{\fenc@list\enc@elt<#1>}%
  \else
     \@font@info{Redeclaring font encoding #1}%
  \fi
  \global\@namedef{T@#1}{#2}%
  \global\@namedef{M@#1}{\default@M#3}%
  \xdef\LastDeclaredEncoding{#1}%
  }
\let\DeclareFontEncoding@saved\DeclareFontEncoding@
\ifx\IeC\@undefined\else
\def\DeclareFontEncoding@#1#2#3{%
  \expandafter
  \ifx\csname T@#1\endcsname\relax
     \def\cdp@elt{\noexpand\cdp@elt}%
     \xdef\cdp@list{\cdp@list\cdp@elt{#1}%
                    {\default@family}{\default@series}%
                    {\default@shape}}%
     \expandafter\let\csname#1-cmd\endcsname\@changed@cmd
     \begingroup
       \wlog{Now handling font encoding #1 ...}%
       \lowercase{%
         \InputIfFileExists{#1enc.dfu}}%
            {\wlog{... processing UTF-8 mapping file for font %
                       encoding #1}}%
            {\wlog{... no UTF-8 mapping file for font encoding #1}}%
     \endgroup
     \def\enc@elt{\noexpand\enc@elt}%
     \xdef\fenc@list{\fenc@list\enc@elt<#1>}%
  \else
     \@font@info{Redeclaring font encoding #1}%
  \fi
  \global\@namedef{T@#1}{#2}%
  \global\@namedef{M@#1}{\default@M#3}%
  \xdef\LastDeclaredEncoding{#1}%
  }
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\DeclareFontEncoding@}
                   {UTF-8 Encoding}%
\def\DeclareFontEncoding@#1#2#3{%
  \expandafter
  \ifx\csname T@#1\endcsname\relax
     \def\cdp@elt{\noexpand\cdp@elt}%
     \xdef\cdp@list{\cdp@list\cdp@elt{#1}%
                    {\default@family}{\default@series}%
                    {\default@shape}}%
     \expandafter\let\csname#1-cmd\endcsname\@changed@cmd
     \def\enc@elt{\noexpand\enc@elt}%
     \xdef\fenc@list{\fenc@list\enc@elt<#1>}%
  \else
     \@font@info{Redeclaring font encoding #1}%
  \fi
  \global\@namedef{T@#1}{#2}%
  \global\@namedef{M@#1}{\default@M#3}%
  \xdef\LastDeclaredEncoding{#1}%
  }
\let\DeclareFontEncoding@saved\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\set@fontsize}
                   {Construct \ystrutbox}%
\def\set@fontsize#1#2#3{%
    \@defaultunits\@tempdimb#2pt\relax\@nnil
    \edef\f@size{\strip@pt\@tempdimb}%
    \@defaultunits\@tempskipa#3pt\relax\@nnil
    \edef\f@baselineskip{\the\@tempskipa}%
    \edef\f@linespread{#1}%
    \let\baselinestretch\f@linespread
    \def\size@update{%
      \baselineskip\f@baselineskip\relax
      \baselineskip\f@linespread\baselineskip
      \normalbaselineskip\baselineskip
      \adjustbaseline
      \setbox\ystrutbox\hbox{\yoko
          \vrule\@width\z@
                \@height.7\baselineskip \@depth.3\baselineskip}%
      \setbox\tstrutbox\hbox{\tate
          \vrule\@width\z@
                \@height.5\baselineskip \@depth.5\baselineskip}%
      \setbox\zstrutbox\hbox{\tate
          \vrule\@width\z@
                \@height.7\baselineskip \@depth.3\baselineskip}%
        \let\size@update\relax}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\set@fontsize}
                   {Construct \ystrutbox}%
\def\set@fontsize#1#2#3{%
    \@defaultunits\@tempdimb#2pt\relax\@nnil
    \edef\f@size{\strip@pt\@tempdimb}%
    \@defaultunits\@tempskipa#3pt\relax\@nnil
    \edef\f@baselineskip{\the\@tempskipa}%
    \edef\f@linespread{#1}%
    \let\baselinestretch\f@linespread
    \def\size@update{%
      \baselineskip\f@baselineskip\relax
      \baselineskip\f@linespread\baselineskip
      \normalbaselineskip\baselineskip
      \adjustbaseline
      \setbox\strutbox\hbox{\yoko
          \vrule\@width\z@
                \@height.7\baselineskip \@depth.3\baselineskip}%
      \setbox\tstrutbox\hbox{\tate
          \vrule\@width\z@
                \@height.5\baselineskip \@depth.5\baselineskip}%
      \setbox\zstrutbox\hbox{\tate
          \vrule\@width\z@
                \@height.7\baselineskip \@depth.3\baselineskip}%
        \let\size@update\relax}}
\plEndIncludeInRelease
\plIncludeInRelease{2017/07/29}{\adjustbaseline}
                   {Change zenkaku reference}%
\def\adjustbaseline{%
    \setbox\adjust@box\hbox{\char\jis"3441}%"
    \cht\ht\adjust@box
    \cdp\dp\adjust@box
    \cwd\wd\adjust@box
    \cvs\normalbaselineskip
    \chs\cwd
    \cHT\cht \advance\cHT\cdp
  \iftdir
    \setbox\adjust@box\hbox{\tbaselineshift\z@ M}%
    \adjust@dimen\ht\adjust@box
    \advance\adjust@dimen\dp\adjust@box
    \advance\adjust@dimen-\cHT
    \divide\adjust@dimen\tw@
    \advance\adjust@dimen\cdp
    \advance\adjust@dimen-\dp\adjust@box
    \tbaselineshift\adjust@dimen
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\adjustbaseline}
                   {Change zenkaku reference}%
\def\adjustbaseline{%
    \setbox\adjust@box\hbox{\char\euc"A1A1}%"
    \cht\ht\adjust@box
    \cdp\dp\adjust@box
    \cwd\wd\adjust@box
    \cvs\normalbaselineskip
    \chs\cwd
    \cHT\cht \advance\cHT\cdp
  \iftdir
    \setbox\adjust@box\hbox{\tbaselineshift\z@ M}%
    \adjust@dimen\ht\adjust@box
    \advance\adjust@dimen\dp\adjust@box
    \advance\adjust@dimen-\cHT
    \divide\adjust@dimen\tw@
    \advance\adjust@dimen\cdp
    \advance\adjust@dimen-\dp\adjust@box
    \tbaselineshift\adjust@dimen
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\textunderscore}
                   {Baseline shift for \textunderscore}%
\DeclareTextCommandDefault{\textunderscore}{%
  \leavevmode\kern.06em
  \raise-\iftdir\ifmdir\ybaselineshift
         \else\tbaselineshift\fi
         \else\ybaselineshift\fi
  \vbox{\hrule\@width.3em}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\textunderscore}
                   {Baseline shift for \textunderscore}%
\DeclareTextCommandDefault{\textunderscore}{%
  \leavevmode\kern.06em
  \iftdir\raise-\tbaselineshift\fi
  \vbox{\hrule\@width.3em}}
\plEndIncludeInRelease
%\plIncludeInRelease{0000/00/00}{\pltx@saved@oalign}
%    {Special case! (This block is required for any emulation date)}%
\def\pltx@saved@oalign#1{\leavevmode\vtop{\baselineskip\z@skip \lineskip.25ex%
  \ialign{##\crcr#1\crcr}}}
%\plEndIncludeInRelease
\plIncludeInRelease{2018/07/28}{\pltx@oalign}
                   {Fix for non-zero baselineshift}%
\def\pltx@oalign#1{\ifmmode
  \leavevmode\vtop{\baselineskip\z@skip \lineskip.25ex%
    \ialign{##\crcr#1\crcr}}%
\else
  \iftdir\ybaselineshift\tbaselineshift\fi
  \m@th$\hbox{\vtop{\baselineskip\z@skip \lineskip.25ex%
    \ialign{##\crcr#1\crcr}}}$%
\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@oalign}
                   {Fix for non-zero baselineshift}%
\let\pltx@oalign\@undefined
\plEndIncludeInRelease
%\plIncludeInRelease{0000/00/00}{\pltx@saved@ltx@sh@ft}
%    {Special case! (This block is required for any emulation date)}%
\def\pltx@saved@ltx@sh@ft #1{%
  \dimen@ #1%
  \kern \strip@pt
    \fontdimen1\font \dimen@
  } % kern by #1 times the current slant
%\plEndIncludeInRelease
\plIncludeInRelease{2018/07/28}{\pltx@ltx@sh@ft}
                   {Fix for non-zero baselineshift}%
\def\pltx@ltx@sh@ft #1{%
  \ybaselineshift\z@
  \dimen@ #1%
  \kern \strip@pt
    \fontdimen1\font \dimen@
  } % kern by #1 times the current slant
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@ltx@sh@ft}
                   {Fix for non-zero baselineshift}%
\let\pltx@ltx@sh@ft\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/06/10}{\g@tlastchart@}
                   {Added \g@tlastchart@}%
\def\g@tlastchart@#1{#1\ifx\lastnodechar\@undefined\m@ne\else\lastnodechar\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\g@tlastchart@}
                   {Added \g@tlastchart@}%
\let\g@tlastchart@\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2018/07/28}{\pltx@isletter}
                   {Support PD1 encoding}%
\def\pltx@mark{\pltx@mark@}
\let\pltx@scanstop\relax
\long\def\pltx@cond#1\fi{%
  #1\expandafter\@firstoftwo\else\expandafter\@secondoftwo\fi}
\def\pltx@pdfencA{PD1}
\def\pltx@composite@chkenc{%
  \ifx\pltx@pdfencA\f@encoding
    \expandafter\@firstoftwo
  \else
    \expandafter\@secondoftwo
  \fi}
\long\def\pltx@isletter#1{%
  \expandafter\pltx@isletter@i#1\pltx@scanstop}
\long\def\pltx@isletter@i#1\pltx@scanstop{%
  \pltx@cond\ifx\pltx@mark#1\pltx@mark\fi{\@firstoftwo}%
    {\pltx@isletter@ii\pltx@scanstop#1\pltx@scanstop{}#1\pltx@mark}}
\long\def\pltx@isletter@ii#1\pltx@scanstop#{%
  \pltx@cond\ifx\pltx@mark#1\pltx@mark\fi%
    {\pltx@isletter@iii}{\pltx@isletter@iv}}
\long\def\pltx@isletter@iii#1\pltx@mark{\@secondoftwo}
\long\def\pltx@isletter@iv#1#2#3\pltx@mark{%
  \pltx@cond\ifx\pltx@mark#3\pltx@mark\fi{%
    \pltx@cond{\ifnum0\ifcat A\noexpand#21\fi\ifcat=\noexpand#21\fi>\z@}\fi
      {\@firstoftwo}{\pltx@composite@chkenc}%
  }{\pltx@composite@chkenc}}
\plEndIncludeInRelease
\plIncludeInRelease{2016/06/10}{\pltx@isletter}
                   {Added \pltx@isletter}%
\def\pltx@mark{\pltx@mark@}
\let\pltx@scanstop\relax
\long\def\pltx@cond#1\fi{%
  #1\expandafter\@firstoftwo\else\expandafter\@secondoftwo\fi}
\long\def\pltx@isletter#1{%
  \expandafter\pltx@isletter@i#1\pltx@scanstop}
\long\def\pltx@isletter@i#1\pltx@scanstop{%
  \pltx@cond\ifx\pltx@mark#1\pltx@mark\fi{\@firstoftwo}%
    {\pltx@isletter@ii\pltx@scanstop#1\pltx@scanstop{}#1\pltx@mark}}
\long\def\pltx@isletter@ii#1\pltx@scanstop#{%
  \pltx@cond\ifx\pltx@mark#1\pltx@mark\fi%
    {\pltx@isletter@iii}{\pltx@isletter@iv}}
\long\def\pltx@isletter@iii#1\pltx@mark{\@secondoftwo}
\long\def\pltx@isletter@iv#1#2#3\pltx@mark{%
  \pltx@cond\ifx\pltx@mark#3\pltx@mark\fi{%
    \pltx@cond{\ifnum0\ifcat A\noexpand#21\fi\ifcat=\noexpand#21\fi>\z@}\fi
      {\@firstoftwo}{\@secondoftwo}%
  }{\@secondoftwo}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@isletter}
                   {Added \pltx@isletter}%
\let\pltx@isletter\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/06/10}{\@text@composite}
                   {Fix for non-zero baselineshift (wrong)}%
\def\@text@composite#1#2#3\@text@composite{%
   \expandafter\@text@composite@x
      \csname\string#1-\string#2\endcsname}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@text@composite}
                   {Fix for non-zero baselineshift (wrong)}%
\def\@text@composite#1#2#3#{%
  \begingroup
  \setbox\z@=\hbox\bgroup%
  \ybaselineshift\z@\tbaselineshift\z@
  \expandafter\@text@composite@x
  \csname\string#1-\string#2\endcsname}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@text@composite}
                   {Fix for non-zero baselineshift (wrong)}%
\def\@text@composite#1#2#3\@text@composite{%
   \expandafter\@text@composite@x
      \csname\string#1-\string#2\endcsname}
\plEndIncludeInRelease
%\plIncludeInRelease{0000/00/00}{\pltx@saved@text@composite@x}
%    {Special case! (This block is required for any emulation date)}%
\def\pltx@saved@text@composite@x#1{%
   \ifx#1\relax
      \expandafter\@secondoftwo
   \else
      \expandafter\@firstoftwo
   \fi
   #1}
%\plEndIncludeInRelease
\plIncludeInRelease{2018/07/28}{\pltx@text@composite@x}
                   {Fix for non-zero baselineshift}%
\def\pltx@text@composite@x#1#2{%
  \ifx#1\relax
    #2%
  \else\pltx@isletter{#1}{#1}{%
    \begingroup
    \setbox\z@\hbox\bgroup
      \ybaselineshift\z@\tbaselineshift\z@
      #1%
      \g@tlastchart@\@tempcntb
      \xdef\pltx@composite@temp{\noexpand\@tempcntb=\the\@tempcntb\relax}%
      \aftergroup\pltx@composite@temp
    \egroup
    \ifnum\@tempcntb<\@cclvi
      \ifnum\@tempcntb>\m@ne
        \ifodd\xspcode\@tempcntb\else\leavevmode\null\fi
      \fi
      \begingroup\m@th$%
        \ifx\textbaselineshiftfactor\@undefined\else
          \textbaselineshiftfactor\z@\fi
        \box\z@
      $\endgroup
      \ifnum\@tempcntb>\m@ne
        \ifnum\xspcode\@tempcntb<2\null\fi
      \fi
    \else
      {\ybaselineshift\z@\tbaselineshift\z@#1}%
    \fi
    \endgroup}%
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/06/10}{\pltx@text@composite@x}
                   {Fix for non-zero baselineshift}%
\def\pltx@text@composite@x#1#2{%
  \ifx#1\relax
    #2%
  \else\pltx@isletter{#1}{#1}{%
    \begingroup
    \setbox\z@\hbox\bgroup%
      \ybaselineshift\z@\tbaselineshift\z@
      #1%
      \g@tlastchart@\@tempcntb
      \xdef\pltx@composite@temp{\noexpand\@tempcntb=\the\@tempcntb\relax}%
      \aftergroup\pltx@composite@temp
    \egroup
    \ifnum\@tempcntb<\z@
      \@tempdima=\iftdir
          \ifmdir
            \ifmmode\tbaselineshift\else\ybaselineshift\fi
          \else
            \tbaselineshift
          \fi
        \else
          \ybaselineshift
        \fi
      \@tempcntb=\@cclvi
    \else\@tempdima=\z@
    \fi
    \ifnum\@tempcntb<\@cclvi
      \ifnum\@tempcntb>\m@ne\ifnum\@tempcntb<\@cclvi
        \ifodd\xspcode\@tempcntb\else\leavevmode\hbox{}\fi
      \fi\fi
      \begingroup\mathsurround\z@$%
        \ifx\textbaselineshiftfactor\@undefined\else
          \textbaselineshiftfactor\z@\fi
        \box\z@
      $\endgroup%
      \ifnum\@tempcntb>\m@ne\ifnum\@tempcntb<\@cclvi
        \ifnum\xspcode\@tempcntb<2\hbox{}\fi
      \fi\fi
    \else
      \ifdim\@tempdima=\z@{\ybaselineshift\z@\tbaselineshift\z@#1}%
      \else\leavevmode\lower\@tempdima\box\z@\fi
    \fi
    \endgroup}%
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\pltx@text@composite@x}
                   {Fix for non-zero baselineshift}%
\def\pltx@text@composite@x#1#2{%
  \ifx#1\relax
    \expandafter\@secondoftwo
  \else
    \expandafter\@firstoftwo
  \fi
  #1{#2}\egroup
  \leavevmode
  \expandafter\lower
    \iftdir
      \ifmdir
        \ifmmode\tbaselineshift\else\ybaselineshift\fi
      \else
        \tbaselineshift
      \fi
    \else
      \ybaselineshift
    \fi
    \box\z@
  \endgroup}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@text@composite@x}
                   {Fix for non-zero baselineshift}%
\let\pltx@text@composite@x\@undefined
\plEndIncludeInRelease
%\plIncludeInRelease{0000/00/00}{\@text@composite@x}
%    {Special case! (This block is required for any emulation date)}%
\DeclareRobustCommand\fixcompositeaccent{%
  \let\oalign\pltx@oalign
  \let\ltx@sh@ft\pltx@ltx@sh@ft
  \let\@text@composite@x\pltx@text@composite@x
}
\DeclareRobustCommand\nofixcompositeaccent{%
  \let\oalign\pltx@saved@oalign
  \let\ltx@sh@ft\pltx@saved@ltx@sh@ft
  \let\@text@composite@x\pltx@saved@text@composite@x
}
\nofixcompositeaccent
%\plEndIncludeInRelease
\plIncludeInRelease{2018/07/28}{\fixcompositeaccent}
                   {Fix for non-zero baselineshift}%
\nofixcompositeaccent % force LaTeX original (conditional default)
% other commands are actually defined for pLaTeX2e 2018-07-28
\plEndIncludeInRelease
\plIncludeInRelease{2016/07/01}{\fixcompositeaccent}
                   {Fix for non-zero baselineshift}%
\nofixcompositeaccent % force LaTeX original (always)
\let\fixcompositeaccent\@undefined
\let\nofixcompositeaccent\@undefined
\let\pltx@saved@oalign\@undefined
\let\pltx@oalign\@undefined
\let\pltx@saved@ltx@sh@ft\@undefined
\let\pltx@ltx@sh@ft\@undefined
\let\pltx@saved@text@composite@x\@undefined
\let\pltx@text@composite@x\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\fixcompositeaccent}
                   {Fix for non-zero baselineshift}%
\fixcompositeaccent % force pLaTeX definition (always)
\let\oalign\pltx@saved@oalign % no fix at that time
\let\ltx@sh@ft\pltx@saved@ltx@sh@ft % no fix at that time
\let\fixcompositeaccent\@undefined
\let\nofixcompositeaccent\@undefined
\let\pltx@saved@oalign\@undefined
\let\pltx@oalign\@undefined
\let\pltx@saved@ltx@sh@ft\@undefined
\let\pltx@ltx@sh@ft\@undefined
\let\pltx@saved@text@composite@x\@undefined
\let\pltx@text@composite@x\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\fixcompositeaccent}
                   {Fix for non-zero baselineshift}%
\nofixcompositeaccent % force LaTeX original (always)
\let\fixcompositeaccent\@undefined
\let\nofixcompositeaccent\@undefined
\let\pltx@saved@oalign\@undefined
\let\pltx@oalign\@undefined
\let\pltx@saved@ltx@sh@ft\@undefined
\let\pltx@ltx@sh@ft\@undefined
\let\pltx@saved@text@composite@x\@undefined
\let\pltx@text@composite@x\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\check@nocorr@}
                   {Italic correction before \textt...}%
\def \check@nocorr@ #1#2\nocorr#3\@nil {%
  \let \check@icl \maybe@ic
  \def \check@icr {\ifvmode \else \aftergroup \maybe@ic \fi}%
  \def \reserved@a {\nocorr}%
  \def \reserved@b {#1}%
  \def \reserved@c {#3}%
  \ifx \reserved@a \reserved@b
    \ifx \reserved@c \@empty
      \let \check@icl \@empty
    \else
      \let \check@icl \@empty
      \let \check@icr \@empty
    \fi
  \else
    \ifx \reserved@c \@empty
    \else
      \let \check@icr \@empty
    \fi
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\check@nocorr@}
                   {Italic correction before \textt...}%
\def \check@nocorr@ #1#2\nocorr#3\@nil {%
  \let \check@icl \relax % changed from \maybe@ic
  \def \check@icr {\ifvmode \else \aftergroup \maybe@ic \fi}%
  \def \reserved@a {\nocorr}%
  \def \reserved@b {#1}%
  \def \reserved@c {#3}%
  \ifx \reserved@a \reserved@b
    \ifx \reserved@c \@empty
      \let \check@icl \@empty
    \else
      \let \check@icl \@empty
      \let \check@icr \@empty
    \fi
  \else
    \ifx \reserved@c \@empty
    \else
      \let \check@icr \@empty
    \fi
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\eminnershape}{\eminnershape}%
\DeclareRobustCommand\em
        {\@nomath\em \ifdim \fontdimen\@ne\font >\z@
                       \eminnershape \else \gtfamily \itshape \fi}%
\def\eminnershape{\mcfamily \upshape}%
\plEndIncludeInRelease
\plIncludeInRelease{2015/01/01}{\eminnershape}{\eminnershape}%
\DeclareRobustCommand\em
        {\@nomath\em \ifdim \fontdimen\@ne\font >\z@
                       \mcfamily \upshape \else \gtfamily \itshape \fi}
\def\eminnershape{\upshape}% defined by LaTeX, but not used by pLaTeX
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\eminnershape}{\eminnershape}%
\DeclareRobustCommand\em
        {\@nomath\em \ifdim \fontdimen\@ne\font >\z@
                       \mcfamily \upshape \else \gtfamily \itshape \fi}
\let\eminnershape\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\<}
                   {\inhibitglue in vertical mode}%
\ifx\protected\@undefined
\def\<{\inhibitglue}
\else
\protected\def\<{\ifvmode\leavevmode\fi\inhibitglue}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\<}
                   {\inhibitglue in vertical mode}%
\def\<{\inhibitglue}
\plEndIncludeInRelease
%% File: plcore.dtx
\plIncludeInRelease{2018/03/09}%
                   {\removejfmglue}{Macro added}%
\ifx\lastnodesubtype\@undefined
  \let\removejfmglue\@undefined
\else
  \setbox0\hbox{%
    \ifdefined\ucs %% upTeX check
      \jfont\tenmin=upjisr-h at 9.62216pt
    \else
      \jfont\tenmin=min10
    \fi\tenmin
    \char\jis"214B\null\setbox0\lastbox
    \global\chardef\pltx@gluetype\lastnodetype
    \global\chardef\pltx@jfmgluesubtype\lastnodesubtype
  }
  \setbox0=\box\voidb@x
  \protected\def\removejfmglue{%
    \ifnum\lastnodetype=\pltx@gluetype\relax
      \ifnum\lastnodesubtype=\pltx@jfmgluesubtype\relax
        \unskip
      \fi
    \fi}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}%
                   {\removejfmglue}{Macro added}%
\let\removejfmglue\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\@no@lnbk}
                   {Break before prebreakpenalty (revert)}%
\def\@no@lnbk #1[#2]{%
  \ifvmode
    \@nolnerr
  \else
    \@tempskipa\lastskip
    \unskip
    \penalty #1\@getpen{#2}%
    \ifdim\@tempskipa>\z@
      \hskip\@tempskipa
      \ignorespaces
    \fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/07/29}{\@no@lnbk}
                   {Break before prebreakpenalty (another)}%
\def\@no@lnbk #1[#2]{%
  \ifvmode
    \@nolnerr
  \else
    \@tempskipa\lastskip
    \unskip
    \penalty #1\@getpen{#2}%
    \penalty\z@\relax %% added (2017/08/25)
    \ifdim\@tempskipa>\z@
      \hskip\@tempskipa
      \ignorespaces
    \fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/05/05}{\@no@lnbk}
                   {Break before prebreakpenalty}%
\def\@no@lnbk #1[#2]{%
  \ifvmode
    \@nolnerr
  \else
    \@tempskipa\lastskip
    \unskip
    \penalty #1\@getpen{#2}%
    \hskip\z@\relax %% added (2017/05/03)
    \ifdim\@tempskipa>\z@
      \hskip\@tempskipa
      \ignorespaces
    \fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@no@lnbk}
                   {LaTeX2e original}%
\def\@no@lnbk #1[#2]{%
  \ifvmode
    \@nolnerr
  \else
    \@tempskipa\lastskip
    \unskip
    \penalty #1\@getpen{#2}%
    \ifdim\@tempskipa>\z@
      \hskip\@tempskipa
      \ignorespaces
    \fi
  \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\@makecol}
                   {Take into account depth of footnote}%
\gdef\@makecol{%
   \setbox\@outputbox\box\@cclv%
   \let\@elt\relax % added on LaTeX (ltoutput.dtx 2003/12/16 v1.2k)
   \xdef\@freelist{\@freelist\@midlist}%
   \global \let \@midlist \@empty
   \@combinefloats
   \let\pltx@textbottom\@textbottom % save (pLaTeX 2017/02/25)
   \ifvoid\footins\else % changed (pLaTeX 2017/02/25)
     \setbox\@outputbox \vbox {%
       \boxmaxdepth \@maxdepth
       \unvbox \@outputbox
       \@textbottom % inserted here (pLaTeX 2017/02/25)
       \vskip \skip\footins
       \color@begingroup
         \normalcolor
         \footnoterule
         \unvbox \footins
       \color@endgroup
       }%
       \let\@textbottom\relax % disable temporarily (pLaTeX 2017/02/25)
   \fi
   \ifvbox\@kludgeins
     \@makespecialcolbox
   \else
     \setbox\@outputbox \vbox to\@colht {%
       %\boxmaxdepth \@maxdepth    % comment out on LaTeX 1997/12/01
       \@texttop
       \dimen@ \dp\@outputbox
       \unvbox \@outputbox
       \iftdir\vbox{\hskip\z@}\fi
       \vskip -\dimen@
       \@textbottom
       }%
   \fi
   \let\@textbottom\pltx@textbottom % restore (pLaTeX 2017/02/25)
   \global \maxdepth \@maxdepth
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\@makecol}
                   {Avoid infinite loop}%
\gdef\@makecol{%
   \setbox\@outputbox\box\@cclv%
   \xdef\@freelist{\@freelist\@midlist}%
   \global \let \@midlist \@empty
   \@combinefloats
   \ifvbox\@kludgeins
     \@makespecialcolbox
   \else
     \setbox\@outputbox \vbox to\@colht {%
       %\boxmaxdepth \@maxdepth    % comment out on LaTeX 1997/12/01
       \@texttop
       \dimen@ \dp\@outputbox
       \unvbox \@outputbox
       \iftdir\vbox{\hskip\z@}\fi
       \vskip -\dimen@
       \@textbottom
       \ifvoid\footins\else % for pLaTeX
         \vskip \skip\footins
         \color@begingroup
            \normalcolor
            \footnoterule
            \unvbox \footins
         \color@endgroup
       \fi
       }%
   \fi
   \global \maxdepth \@maxdepth
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@makecol}
                   {Adjust for \dp\@outputbox in tate mode}%
\gdef\@makecol{%
   \setbox\@outputbox\box\@cclv%
   \xdef\@freelist{\@freelist\@midlist}%
   \global \let \@midlist \@empty
   \@combinefloats
   \ifvbox\@kludgeins
     \@makespecialcolbox
   \else
     \setbox\@outputbox \vbox to\@colht {%
       %\boxmaxdepth \@maxdepth    % comment out on LaTeX 1997/12/01
       \@texttop
       \dimen@ \dp\@outputbox
       \unvbox \@outputbox
       \iftdir\hskip\z@\fi
       \vskip -\dimen@
       \@textbottom
       \ifvoid\footins\else % for pLaTeX
         \vskip \skip\footins
         \color@begingroup
            \normalcolor
            \footnoterule
            \unvbox \footins
         \color@endgroup
       \fi
       }%
   \fi
   \global \maxdepth \@maxdepth
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@makecol}
                   {ASCII Corporation original}%
\gdef\@makecol{%
   \setbox\@outputbox\box\@cclv%
   \xdef\@freelist{\@freelist\@midlist}%
   \global \let \@midlist \@empty
   \@combinefloats
   \ifvbox\@kludgeins
     \@makespecialcolbox
   \else
     \setbox\@outputbox \vbox to\@colht {%
       %\boxmaxdepth \@maxdepth    % comment out on LaTeX 1997/12/01
       \@texttop
       \dimen@ \dp\@outputbox
       \unvbox \@outputbox
       \iftdir\hskip\z@
       \else\vskip -\dimen@\fi
       \@textbottom
       \ifvoid\footins\else % for pLaTeX
         \vskip \skip\footins
         \color@begingroup
            \normalcolor
            \footnoterule
            \unvbox \footins
         \color@endgroup
       \fi
       }%
   \fi
   \global \maxdepth \@maxdepth
}
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\@tombowbleed}{Macro added}%
\def\@tombowbleed{3mm}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tombowbleed}{Macro added}%
\let\@tombowbleed\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\@tombowcolor}{Macro added}%
\def\@tombowcolor{\normalcolor}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tombowcolor}{Macro added}%
\let\@tombowcolor\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\maketombowbox}
                               {Use \@tombowbleed}%
\def\maketombowbox{%
  \setbox\@TL\hbox to\z@{\yoko\hss
      \vrule width\dimexpr 10mm+\@tombowbleed\relax height\@tombowwidth depth\z@
      \vrule height10mm width\@tombowwidth depth\z@
      \iftombowdate
        \raise4pt\hbox to\z@{\hskip5mm\@bannerfont\the\@bannertoken\hss}%
      \fi}%
  \setbox\@Tl\hbox to\z@{\yoko\hss
      \vrule width10mm height\@tombowwidth depth\z@
      \vrule height\dimexpr 10mm+\@tombowbleed\relax width\@tombowwidth depth\z@}%
  \setbox\@TC\hbox{\yoko
      \vrule width10mm height\@tombowwidth depth\z@
      \vrule height10mm width\@tombowwidth depth\z@
      \vrule width10mm height\@tombowwidth depth\z@}%
  \setbox\@TR\hbox to\z@{\yoko
      \vrule height10mm width\@tombowwidth depth\z@
      \vrule width\dimexpr 10mm+\@tombowbleed\relax height\@tombowwidth depth\z@\hss}%
  \setbox\@Tr\hbox to\z@{\yoko
      \vrule height\dimexpr 10mm+\@tombowbleed\relax width\@tombowwidth depth\z@
      \vrule width10mm height\@tombowwidth depth\z@\hss}%
  \setbox\@BL\hbox to\z@{\yoko\hss
      \vrule width\dimexpr 10mm+\@tombowbleed\relax depth\@tombowwidth height\z@
      \vrule depth10mm width\@tombowwidth height\z@}%
  \setbox\@Bl\hbox to\z@{\yoko\hss
      \vrule width10mm depth\@tombowwidth height\z@
      \vrule depth\dimexpr 10mm+\@tombowbleed\relax width\@tombowwidth height\z@}%
  \setbox\@BC\hbox{\yoko
      \vrule width10mm depth\@tombowwidth height\z@
      \vrule depth10mm width\@tombowwidth height\z@
      \vrule width10mm depth\@tombowwidth height\z@}%
  \setbox\@BR\hbox to\z@{\yoko
      \vrule depth10mm width\@tombowwidth height\z@
      \vrule width\dimexpr 10mm+\@tombowbleed\relax depth\@tombowwidth height\z@\hss}%
  \setbox\@Br\hbox to\z@{\yoko
      \vrule depth\dimexpr 10mm+\@tombowbleed\relax width\@tombowwidth height\z@
      \vrule width10mm depth\@tombowwidth height\z@\hss}%
  \setbox\@CL\hbox to\z@{\yoko\hss
      \vrule width10mm height.5\@tombowwidth depth.5\@tombowwidth
      \vrule height10mm depth10mm width\@tombowwidth}%
  \setbox\@CR\hbox to\z@{\yoko
      \vrule height10mm depth10mm width\@tombowwidth
      \vrule height.5\@tombowwidth depth.5\@tombowwidth width10mm\hss}%
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\maketombowbox}
                               {ASCII Corporation original}%
\def\maketombowbox{%
  \setbox\@TL\hbox to\z@{\yoko\hss
      \vrule width13mm height\@tombowwidth depth\z@
      \vrule height10mm width\@tombowwidth depth\z@
      \iftombowdate
        \raise4pt\hbox to\z@{\hskip5mm\@bannerfont\the\@bannertoken\hss}%
      \fi}%
  \setbox\@Tl\hbox to\z@{\yoko\hss
      \vrule width10mm height\@tombowwidth depth\z@
      \vrule height13mm width\@tombowwidth depth\z@}%
  \setbox\@TC\hbox{\yoko
      \vrule width10mm height\@tombowwidth depth\z@
      \vrule height10mm width\@tombowwidth depth\z@
      \vrule width10mm height\@tombowwidth depth\z@}%
  \setbox\@TR\hbox to\z@{\yoko
      \vrule height10mm width\@tombowwidth depth\z@
      \vrule width13mm height\@tombowwidth depth\z@\hss}%
  \setbox\@Tr\hbox to\z@{\yoko
      \vrule height13mm width\@tombowwidth depth\z@
      \vrule width10mm height\@tombowwidth depth\z@\hss}%
  \setbox\@BL\hbox to\z@{\yoko\hss
      \vrule width13mm depth\@tombowwidth height\z@
      \vrule depth10mm width\@tombowwidth height\z@}%
  \setbox\@Bl\hbox to\z@{\yoko\hss
      \vrule width10mm depth\@tombowwidth height\z@
      \vrule depth13mm width\@tombowwidth height\z@}%
  \setbox\@BC\hbox{\yoko
      \vrule width10mm depth\@tombowwidth height\z@
      \vrule depth10mm width\@tombowwidth height\z@
      \vrule width10mm depth\@tombowwidth height\z@}%
  \setbox\@BR\hbox to\z@{\yoko
      \vrule depth10mm width\@tombowwidth height\z@
      \vrule width13mm depth\@tombowwidth height\z@\hss}%
  \setbox\@Br\hbox to\z@{\yoko
      \vrule depth13mm width\@tombowwidth height\z@
      \vrule width10mm depth\@tombowwidth height\z@\hss}%
  \setbox\@CL\hbox to\z@{\yoko\hss
      \vrule width10mm height.5\@tombowwidth depth.5\@tombowwidth
      \vrule height10mm depth10mm width\@tombowwidth}%
  \setbox\@CR\hbox to\z@{\yoko
      \vrule height10mm depth10mm width\@tombowwidth
      \vrule height.5\@tombowwidth depth.5\@tombowwidth width10mm\hss}%
}
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\@outputtombow}
                   {Use \@tombowcolor and \@tombowbleed}%
\def\@outputtombow{%
  \iftombow
  \vbox to\z@{\kern-\dimexpr 10mm+\@tombowbleed\relax\relax
    \boxmaxdepth\maxdimen
    \moveleft\@tombowbleed \vbox to\@@paperheight{%
    \color@begingroup
      \@tombowcolor
      \hbox to\@@paperwidth{\hskip\@tombowbleed\relax
         \copy\@TL\hfill\copy\@TC\hfill\copy\@TR\hskip\@tombowbleed}%
      \kern-10mm
      \hbox to\@@paperwidth{\copy\@Tl\hfill\copy\@Tr}%
      \vfill
      \hbox to\@@paperwidth{\copy\@CL\hfill\copy\@CR}%
      \vfill
      \hbox to\@@paperwidth{\copy\@Bl\hfill\copy\@Br}%
      \kern-10mm
      \hbox to\@@paperwidth{\hskip\@tombowbleed\relax
         \copy\@BL\hfill\copy\@BC\hfill\copy\@BR\hskip\@tombowbleed}%
    \color@endgroup
    }\vss
  }%
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@outputtombow}
                   {Safe \boxmaxdepth}%
\def\@outputtombow{%
  \iftombow
  \vbox to\z@{\kern-13mm\relax
    \boxmaxdepth\maxdimen
    \moveleft3mm\vbox to\@@paperheight{%
      \hbox to\@@paperwidth{\hskip3mm\relax
         \copy\@TL\hfill\copy\@TC\hfill\copy\@TR\hskip3mm}%
      \kern-10mm
      \hbox to\@@paperwidth{\copy\@Tl\hfill\copy\@Tr}%
      \vfill
      \hbox to\@@paperwidth{\copy\@CL\hfill\copy\@CR}%
      \vfill
      \hbox to\@@paperwidth{\copy\@Bl\hfill\copy\@Br}%
      \kern-10mm
      \hbox to\@@paperwidth{\hskip3mm\relax
         \copy\@BL\hfill\copy\@BC\hfill\copy\@BR\hskip3mm}%
    }\vss
  }%
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@outputtombow}
                   {ASCII Corporation original}%
\def\@outputtombow{%
  \iftombow
  \vbox to\z@{\kern-13mm\relax
    \moveleft3mm\vbox to\@@paperheight{%
      \hbox to\@@paperwidth{\hskip3mm\relax
         \copy\@TL\hfill\copy\@TC\hfill\copy\@TR\hskip3mm}%
      \kern-10mm
      \hbox to\@@paperwidth{\copy\@Tl\hfill\copy\@Tr}%
      \vfill
      \hbox to\@@paperwidth{\copy\@CL\hfill\copy\@CR}%
      \vfill
      \hbox to\@@paperwidth{\copy\@Bl\hfill\copy\@Br}%
      \kern-10mm
      \hbox to\@@paperwidth{\hskip3mm\relax
         \copy\@BL\hfill\copy\@BC\hfill\copy\@BR\hskip3mm}%
    }\vss
  }%
  \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\@tombowreset@@paper}
                   {Macro separated}%
\def\@tombowreset@@paper{%
     \@@topmargin\topmargin
     \iftombow
       \@@paperwidth\paperwidth
       \advance\@@paperwidth 2\dimexpr\@tombowbleed\relax
       \@@paperheight\paperheight \advance\@@paperheight 10mm\relax
       \advance\@@paperheight 2\dimexpr\@tombowbleed\relax
       \advance\@@topmargin 1in\relax \advance\@themargin 1in\relax
     \fi
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tombowreset@@paper}
                   {Macro separated}%
\let\@tombowreset@@paper\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2018/05/20}{\@outputpage}
                   {Use \@tombowreset@@paper}%
\def\@outputpage{%
\begingroup % the \endgroup is put in by \aftergroup
  \iftdir
    \dimen\z@\textwidth \textwidth\textheight \textheight\dimen\z@
  \fi
  \let \protect \noexpand
  \language\document@default@language
  \@resetactivechars
  \global\let\@@if@newlist\if@newlist
  \global\@newlistfalse
  \@parboxrestore
  \shipout\vbox{\yoko
    \set@typeset@protect
    \aftergroup\endgroup
    \aftergroup\set@typeset@protect
     \if@specialpage
       \global\@specialpagefalse\@nameuse{ps@\@specialstyle}%
     \fi
     \if@twoside
       \ifodd\count\z@ \let\@thehead\@oddhead \let\@thefoot\@oddfoot
          \iftdir\let\@themargin\evensidemargin
          \else\let\@themargin\oddsidemargin\fi
       \else \let\@thehead\@evenhead
          \let\@thefoot\@evenfoot
           \iftdir\let\@themargin\oddsidemargin
           \else\let\@themargin\evensidemargin\fi
     \fi\fi
     \@tombowreset@@paper
     \reset@font
     \normalsize
     \normalsfcodes
     \let\label\@gobble
     \let\index\@gobble
     \let\glossary\@gobble
     \baselineskip\z@skip \lineskip\z@skip \lineskiplimit\z@
    \@begindvi
    \@outputtombow
    \vskip \@@topmargin
    \moveright\@themargin\vbox{%
      \setbox\@tempboxa \vbox to\headheight{%
        \vfil
        \color@hbox
          \normalcolor
          \hb@xt@\textwidth{\@thehead}%
        \color@endbox
      }%                        %% 22 Feb 87
      \dp\@tempboxa \z@
      \box\@tempboxa
      \vskip \headsep
      \box\@outputbox
      \baselineskip \footskip
      \color@hbox
        \normalcolor
        \hb@xt@\textwidth{\@thefoot}%
      \color@endbox
    }%
  }%
  \global\let\if@newlist\@@if@newlist
  \global \@colht \textheight
  \stepcounter{page}%
  \let\firstmark\botmark
}
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\@outputpage}
                   {Reset language for hyphenation}%
\def\@outputpage{%
\begingroup % the \endgroup is put in by \aftergroup
  \iftdir
    \dimen\z@\textwidth \textwidth\textheight \textheight\dimen\z@
  \fi
  \let \protect \noexpand
  \language\document@default@language
  \@resetactivechars
  \global\let\@@if@newlist\if@newlist
  \global\@newlistfalse
  \@parboxrestore
  \shipout\vbox{\yoko
    \set@typeset@protect
    \aftergroup\endgroup
    \aftergroup\set@typeset@protect
     \if@specialpage
       \global\@specialpagefalse\@nameuse{ps@\@specialstyle}%
     \fi
     \if@twoside
       \ifodd\count\z@ \let\@thehead\@oddhead \let\@thefoot\@oddfoot
          \iftdir\let\@themargin\evensidemargin
          \else\let\@themargin\oddsidemargin\fi
       \else \let\@thehead\@evenhead
          \let\@thefoot\@evenfoot
           \iftdir\let\@themargin\oddsidemargin
           \else\let\@themargin\evensidemargin\fi
     \fi\fi
     \@@topmargin\topmargin
     \iftombow
       \@@paperwidth\paperwidth \advance\@@paperwidth 6mm\relax
       \@@paperheight\paperheight \advance\@@paperheight 16mm\relax
       \advance\@@topmargin 1in\relax \advance\@themargin 1in\relax
     \fi
     \reset@font
     \normalsize
     \normalsfcodes
     \let\label\@gobble
     \let\index\@gobble
     \let\glossary\@gobble
     \baselineskip\z@skip \lineskip\z@skip \lineskiplimit\z@
    \@begindvi
    \@outputtombow
    \vskip \@@topmargin
    \moveright\@themargin\vbox{%
      \setbox\@tempboxa \vbox to\headheight{%
        \vfil
        \color@hbox
          \normalcolor
          \hb@xt@\textwidth{\@thehead}%
        \color@endbox
      }%                        %% 22 Feb 87
      \dp\@tempboxa \z@
      \box\@tempboxa
      \vskip \headsep
      \box\@outputbox
      \baselineskip \footskip
      \color@hbox
        \normalcolor
        \hb@xt@\textwidth{\@thefoot}%
      \color@endbox
    }%
  }%
  \global\let\if@newlist\@@if@newlist
  \global \@colht \textheight
  \stepcounter{page}%
  \let\firstmark\botmark
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@outputpage}
                   {ASCII Corporation original}%
\def\@outputpage{%
\begingroup % the \endgroup is put in by \aftergroup
  \iftdir
    \dimen\z@\textwidth \textwidth\textheight \textheight\dimen\z@
  \fi
  \let \protect \noexpand
  \@resetactivechars
  \global\let\@@if@newlist\if@newlist
  \global\@newlistfalse
  \@parboxrestore
  \shipout\vbox{\yoko
    \set@typeset@protect
    \aftergroup\endgroup
    \aftergroup\set@typeset@protect
     \if@specialpage
       \global\@specialpagefalse\@nameuse{ps@\@specialstyle}%
     \fi
     \if@twoside
       \ifodd\count\z@ \let\@thehead\@oddhead \let\@thefoot\@oddfoot
          \iftdir\let\@themargin\evensidemargin
          \else\let\@themargin\oddsidemargin\fi
       \else \let\@thehead\@evenhead
          \let\@thefoot\@evenfoot
           \iftdir\let\@themargin\oddsidemargin
           \else\let\@themargin\evensidemargin\fi
     \fi\fi
     \@@topmargin\topmargin
     \iftombow
       \@@paperwidth\paperwidth \advance\@@paperwidth 6mm\relax
       \@@paperheight\paperheight \advance\@@paperheight 16mm\relax
       \advance\@@topmargin 1in\relax \advance\@themargin 1in\relax
     \fi
     \reset@font
     \normalsize
     \normalsfcodes
     \let\label\@gobble
     \let\index\@gobble
     \let\glossary\@gobble
     \baselineskip\z@skip \lineskip\z@skip \lineskiplimit\z@
    \@begindvi
    \@outputtombow
    \vskip \@@topmargin
    \moveright\@themargin\vbox{%
      \setbox\@tempboxa \vbox to\headheight{%
        \vfil
        \color@hbox
          \normalcolor
          \hb@xt@\textwidth{\@thehead}%
        \color@endbox
      }%                        %% 22 Feb 87
      \dp\@tempboxa \z@
      \box\@tempboxa
      \vskip \headsep
      \box\@outputbox
      \baselineskip \footskip
      \color@hbox
        \normalcolor
        \hb@xt@\textwidth{\@thefoot}%
      \color@endbox
    }%
  }%
  \global\let\if@newlist\@@if@newlist
  \global \@colht \textheight
  \stepcounter{page}%
  \let\firstmark\botmark
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/07/01}{\AtBeginDvi}
                   {Fix for incompatible direction}%
\def \AtBeginDvi #1{%
  \global \setbox \@begindvibox
    \vbox{\yoko \unvbox \@begindvibox #1}%
}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\AtBeginDvi}
                   {LaTeX2e original}%
\def \AtBeginDvi #1{%
  \global \setbox \@begindvibox
    \vbox{\unvbox \@begindvibox #1}%
}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@makefnmark}
                   {Remove extra \xkanjiskip}%
\renewcommand\@makefnmark{%
  \ifydir \hbox{}\hbox{\@textsuperscript{\normalfont\@thefnmark}}\hbox{}%
  \else\hbox{\yoko\@textsuperscript{\normalfont\@thefnmark}}\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@makefnmark}
                   {ASCII Corporation original}%
\renewcommand\@makefnmark{\hbox{%
  \ifydir \@textsuperscript{\normalfont\@thefnmark}%
  \else\hbox{\yoko\@textsuperscript{\normalfont\@thefnmark}}\fi}}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\pltx@foot@penalty}
                   {Add new counter \pltx@foot@penalty}%
\ifx\@undefined\pltx@foot@penalty \newcount\pltx@foot@penalty \fi
\pltx@foot@penalty\z@
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@foot@penalty}
                   {Add new counter \pltx@foot@penalty}%
\let\pltx@foot@penalty\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\footnote}
                   {Append \inhibitglue in \footnotemark}%
\def\footnote{\inhibitglue
     \@ifnextchar[\@xfootnote{\stepcounter\@mpfn
     \protected@xdef\@thefnmark{\thempfn}%
     \@footnotemark\@footnotetext}}
\def\footnotemark{\inhibitglue
   \@ifnextchar[\@xfootnotemark
     {\stepcounter{footnote}%
      \protected@xdef\@thefnmark{\thefootnote}%
      \@footnotemark}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\footnote}
                   {LaTeX2e original}%
\def\footnote{\@ifnextchar[\@xfootnote{\stepcounter\@mpfn
     \protected@xdef\@thefnmark{\thempfn}%
     \@footnotemark\@footnotetext}}
\def\footnotemark{%
   \@ifnextchar[\@xfootnotemark
     {\stepcounter{footnote}%
      \protected@xdef\@thefnmark{\thefootnote}%
      \@footnotemark}}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\footnotetext}
                   {Preserve penalty before \footnotetext}%
\def\footnotetext{%
  \ifhmode\pltx@foot@penalty\lastpenalty\unpenalty\fi%
  \@ifnextchar [\@xfootnotenext
    {\protected@xdef\@thefnmark{\thempfn}%
     \@footnotetext}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\footnotetext}
                   {LaTeX2e original}%
\def\footnotetext{%
     \@ifnextchar [\@xfootnotenext
       {\protected@xdef\@thefnmark{\thempfn}%
    \@footnotetext}}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/08}{\@footnotetext}
                   {Allow break after \footnote (more fix)}%
\long\def\@footnotetext#1{%
  \ifydir\def\@tempa{\yoko}\else\def\@tempa{\tate}\fi
  \insert\footins{\@tempa%
    \reset@font\footnotesize
    \interlinepenalty\interfootnotelinepenalty
    \splittopskip\footnotesep
    \splitmaxdepth \dp\strutbox \floatingpenalty \@MM
    \hsize\columnwidth \@parboxrestore
    \protected@edef\@currentlabel{%
       \csname p@footnote\endcsname\@thefnmark
    }%
    \color@begingroup
      \@makefntext{%
        \rule\z@\footnotesep\ignorespaces#1\@finalstrut\strutbox}%
    \color@endgroup}\ifhmode\null\fi
    \ifnum\pltx@foot@penalty=\z@\else
      \penalty\pltx@foot@penalty
      \pltx@foot@penalty\z@
    \fi}
\plEndIncludeInRelease
\plIncludeInRelease{2016/09/03}{\@footnotetext}
                   {Allow break after \footnote}%
\long\def\@footnotetext#1{%
  \ifydir\def\@tempa{\yoko}\else\def\@tempa{\tate}\fi
  \insert\footins{\@tempa%
    \reset@font\footnotesize
    \interlinepenalty\interfootnotelinepenalty
    \splittopskip\footnotesep
    \splitmaxdepth \dp\strutbox \floatingpenalty \@MM
    \hsize\columnwidth \@parboxrestore
    \protected@edef\@currentlabel{%
       \csname p@footnote\endcsname\@thefnmark
    }%
    \color@begingroup
      \@makefntext{%
        \rule\z@\footnotesep\ignorespaces#1\@finalstrut\strutbox}%
    \color@endgroup}\null
    \ifnum\pltx@foot@penalty=\z@\else
      \penalty\pltx@foot@penalty
      \pltx@foot@penalty\z@
    \fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@footnotetext}
                   {ASCII Corporation original}%
\long\def\@footnotetext#1{%
  \ifydir\def\@tempa{\yoko}\else\def\@tempa{\tate}\fi
  \insert\footins{\@tempa%
    \reset@font\footnotesize
    \interlinepenalty\interfootnotelinepenalty
    \splittopskip\footnotesep
    \splitmaxdepth \dp\strutbox \floatingpenalty \@MM
    \hsize\columnwidth \@parboxrestore
    \protected@edef\@currentlabel{%
       \csname p@footnote\endcsname\@thefnmark
    }%
    \color@begingroup
      \@makefntext{%
        \rule\z@\footnotesep\ignorespaces#1\@finalstrut\strutbox}%
    \color@endgroup}}
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\@setref}
                   {Space factor after \ref}%
\def\@setref#1#2#3{%
  \ifx#1\relax
    \protect\G@refundefinedtrue
    \nfss@text{\reset@font\bfseries ??}%
    \@latex@warning{Reference `#3' on page \thepage \space
              undefined}%
  \else
    \expandafter#2#1\protect\@setref@{}% change \null to \protect\@setref@{}
  \fi}
\def\@setref@{\ifhmode\spacefactor\@m\fi}
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\@setref}
                   {Spacing after \ref in moving arguments}%
\def\@setref#1#2#3{%
  \ifx#1\relax
    \protect\G@refundefinedtrue
    \nfss@text{\reset@font\bfseries ??}%
    \@latex@warning{Reference `#3' on page \thepage \space
              undefined}%
  \else
    \expandafter#2#1\relax{}% change \null to \relax{}
  \fi}
\let\@setref@\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@setref}
                   {ASCII Corporation original}%
\def\@setref#1#2#3{%
  \ifx#1\relax
    \protect\G@refundefinedtrue
    \nfss@text{\reset@font\bfseries ??}%
    \@latex@warning{Reference `#3' on page \thepage \space
              undefined}%
  \else
    \expandafter#2#1\relax% change \null to \relax
  \fi}
\let\@setref@\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\verb}
                   {Preserve beginning space characters}%
\if@compatibility\else
\def\verb{\relax\ifmmode\hbox\else\leavevmode\vadjust{}\fi
  \bgroup
    \verb@eol@error \let\do\@makeother \dospecials
    \verbatim@font\@noligs
    \language\l@nohyphenation
    \@ifstar\@sverb\@verb}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\verb}
                   {Disable hyphenation in verb}%
\if@compatibility\else
\def\verb{\relax\ifmmode\hbox\else\leavevmode\fi
  \bgroup
    \verb@eol@error \let\do\@makeother \dospecials
    \verbatim@font\@noligs
    \language\l@nohyphenation
    \@ifstar\@sverb\@verb}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\verb}
                   {ASCII Corporation original}%
\if@compatibility\else
\def\verb{\relax\ifmmode\hbox\else\leavevmode\fi
  \bgroup
    \verb@eol@error \let\do\@makeother \dospecials
    \verbatim@font\@noligs
    \@ifstar\@sverb\@verb}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2017/10/28}{\@startline}
                   {Inhibit JFM glue at the beginning}%
\gdef\@startline{%
     \ifnum \@nxttabmar >\@hightab
       \@badtab
       \global\@nxttabmar \@hightab
     \fi
     \global\@curtabmar \@nxttabmar
     \global\@curtab \@curtabmar
     \global\setbox\@curline \hbox {}%
     \@startfield
     \strut\inhibitglue}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@startline}
                   {LaTeX2e original}%
\gdef\@startline{%
     \ifnum \@nxttabmar >\@hightab
       \@badtab
       \global\@nxttabmar \@hightab
     \fi
     \global\@curtabmar \@nxttabmar
     \global\@curtab \@curtabmar
     \global\setbox\@curline \hbox {}%
     \@startfield
     \strut}
\plEndIncludeInRelease
\plIncludeInRelease{2018/03/09}{\@tabclassz}
                   {Inhibit JFM glue in tabular cells (better)}%
\ifx\removejfmglue\@undefined
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acol
  \fi
  \edef\@preamble{%
    \@preamble{%
      \ifcase\@chnum
        \hfil\mbox{\inhibitglue\ignorespaces\@sharp\unskip}\hfil % c
      \or
        \hskip1sp\mbox{\inhibitglue\ignorespaces\@sharp\unskip}\hfil % l
      \or
        \hfil\hskip1sp\mbox{\inhibitglue\ignorespaces\@sharp\unskip}% % r
      \fi}}}
\else
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acol
  \fi
  \edef\@preamble{%
    \@preamble{%
      \ifcase\@chnum
        \hfil\hskip1sp\inhibitglue
        \ignorespaces\@sharp\unskip\removejfmglue\hfil % c
      \or
        \hskip1sp\inhibitglue
        \ignorespaces\@sharp\unskip\removejfmglue\hfil % l
      \or
        \hfil\hskip1sp\inhibitglue
        \ignorespaces\@sharp\unskip\removejfmglue % r
      \fi}}}
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2017/09/26}{\@tabclassz}
                   {Inhibit JFM glue in tabular cells}%
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acol
  \fi
  \edef\@preamble{%
    \@preamble{%
      \ifcase\@chnum
        \hfil\mbox{\inhibitglue
          \ignorespaces\@sharp\unskip}\hfil % c
      \or
        \hskip1sp\mbox{\inhibitglue
          \ignorespaces\@sharp\unskip}\hfil % l
      \or
        \hfil\hskip1sp\mbox{\inhibitglue
          \ignorespaces\@sharp\unskip}% % r
      \fi}}}
\plEndIncludeInRelease
\plIncludeInRelease{2017/07/29}{\@tabclassz}
                   {Inhibit JFM glue in tabular cells (wrong)}%
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acol
  \fi
  \edef\@preamble{%
    \@preamble{%
      \ifcase\@chnum
        \hfil\inhibitglue
        \ignorespaces\@sharp\unskip\unskip\hfil % c
      \or
        \hskip1sp\inhibitglue
        \ignorespaces\@sharp\unskip\unskip\hfil % l
      \or
        \hfil\hskip1sp\inhibitglue
        \ignorespaces\@sharp\unskip\unskip % r
      \fi}}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tabclassz}
                   {LaTeX2e original}%
\def\@tabclassz{%
  \ifcase\@lastchclass
    \@acolampacol
  \or
    \@ampacol
  \or
  \or
  \or
    \@addamp
  \or
    \@acolampacol
  \or
    \@firstampfalse\@acol
  \fi
  \edef\@preamble{%
    \@preamble{%
      \ifcase\@chnum
        \hfil\ignorespaces\@sharp\unskip\hfil
      \or
        \hskip1sp\ignorespaces\@sharp\unskip\hfil
      \or
        \hfil\hskip1sp\ignorespaces\@sharp\unskip
      \fi}}}
\plEndIncludeInRelease
\plIncludeInRelease{2018/03/09}{\@classv}
                   {Inhibit JFM glue in tabular cells (better)}%
\def\@classv{\@addtopreamble{\@startpbox{\@nextchar}\pltx@next@inhibitglue\ignorespaces
\@sharp\unskip\@endpbox}}
\plEndIncludeInRelease
\plIncludeInRelease{2017/07/29}{\@classv}
                   {Inhibit JFM glue in tabular cells}%
\def\@classv{\@addtopreamble{\@startpbox{\@nextchar}\mbox{}\inhibitglue\ignorespaces
\@sharp\unskip\@endpbox}}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@classv}
                   {LaTeX2e original}%
\def\@classv{\@addtopreamble{\@startpbox{\@nextchar}\ignorespaces
\@sharp\@endpbox}}
\plEndIncludeInRelease
\plIncludeInRelease{2018/03/09}{\pltx@next@inhibitglue}
                   {Add \pltx@next@inhibitglue}%
\protected\def\pltx@next@inhibitglue{%
  \ifhmode\inhibitglue\else
  \edef\@tempa{\everypar{%
    \everypar{\unexpanded\expandafter{\the\everypar}}%
    \unexpanded\expandafter{\the\everypar}\inhibitglue}}%
  \@tempa\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\pltx@next@inhibitglue}
                   {Add \pltx@next@inhibitglue}%
\let\pltx@next@inhibitglue\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@tabular}
                   {Remove extra \xkanjiskip}%
\def\@tabular{\leavevmode \null\hbox \bgroup $\let\@acol\@tabacol
   \let\@classz\@tabclassz
   \let\@classiv\@tabclassiv \let\\\@tabularcr\@tabarray}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@tabular}
                   {LaTeX2e original}%
\def\@tabular{\leavevmode \hbox \bgroup $\let\@acol\@tabacol
   \let\@classz\@tabclassz
   \let\@classiv\@tabclassiv \let\\\@tabularcr\@tabarray}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\endtabular}
                   {Remove extra \xkanjiskip}%
\def\endtabular{\crcr\egroup\egroup $\egroup\null}
\expandafter \let \csname endtabular*\endcsname = \endtabular
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\endtabular}
                   {LaTeX2e original}%
\def\endtabular{\crcr\egroup\egroup $\egroup}
\expandafter \let \csname endtabular*\endcsname = \endtabular
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\@iiiparbox}
                   {Remove extra \xkanjiskip}%
\let\@parboxto\@empty
\long\def\@iiiparbox#1#2[#3]#4#5{%
  \leavevmode
  \@pboxswfalse
  \setlength\@tempdima{#4}%
  \@begin@tempboxa\vbox{\hsize\@tempdima\@parboxrestore#5\@@par}%
    \ifx\relax#2\else
      \setlength\@tempdimb{#2}%
      \edef\@parboxto{to\the\@tempdimb}%
    \fi
    \if#1b\vbox
    \else\if #1t\vtop
    \else\ifmmode\vcenter
    \else\@pboxswtrue\null$\vcenter% !!!
    \fi\fi\fi
    \@parboxto{\let\hss\vss\let\unhbox\unvbox
       \csname bm@#3\endcsname}%
    \if@pboxsw \m@th$\null\fi% !!!
  \@end@tempboxa}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\@iiiparbox}
                   {LaTeX2e original}%
\let\@parboxto\@empty
\long\def\@iiiparbox#1#2[#3]#4#5{%
  \leavevmode
  \@pboxswfalse
  \setlength\@tempdima{#4}%
  \@begin@tempboxa\vbox{\hsize\@tempdima\@parboxrestore#5\@@par}%
    \ifx\relax#2\else
      \setlength\@tempdimb{#2}%
      \edef\@parboxto{to\the\@tempdimb}%
    \fi
    \if#1b\vbox
    \else\if #1t\vtop
    \else\ifmmode\vcenter
    \else\@pboxswtrue $\vcenter
    \fi\fi\fi
    \@parboxto{\let\hss\vss\let\unhbox\unvbox
       \csname bm@#3\endcsname}%
    \if@pboxsw \m@th$\fi
  \@end@tempboxa}
\plEndIncludeInRelease
\plIncludeInRelease{2016/04/17}{\underline}
                   {Remove extra \xkanjiskip}%
\def\underline#1{%
  \relax
  \ifmmode\@@underline{#1}%
  \else \leavevmode\null$\@@underline{\hbox{#1}}\m@th$\null\relax\fi}
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\underline}
                   {LaTeX2e original}%
\def\underline#1{%
  \relax
  \ifmmode\@@underline{#1}%
  \else $\@@underline{\hbox{#1}}\m@th$\relax\fi}
\plEndIncludeInRelease
\plIncludeInRelease{2018/03/09}%
                   {\e@alloc@chardef}{Extended Allocation (FAM256)}%
\ifx\omathchar\@undefined
  \ifx\widowpenalties\@undefined
    \mathchardef\e@alloc@top=255
    \let\e@alloc@chardef\chardef
  \else
    \mathchardef\e@alloc@top=32767
    \let\e@alloc@chardef\mathchardef
  \fi
\else
    \omathchardef\e@alloc@top=65535
    \let\e@alloc@chardef\omathchardef
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2016/11/29}%
                   {\e@alloc@chardef}{Extended Allocation (FAM256)}%
\ifx\omathchar\@undefined
  \ifx\widowpenalties\@undefined
    \mathchardef\e@alloc@top=255
    \let\e@alloc@chardef\chardef
  \else
    \mathchardef\e@alloc@top=32767
    \let\e@alloc@chardef\mathchardef
  \fi
\else
  \ifx\enablecjktoken\@undefined % pTeX
    \omathchardef\e@alloc@top=65535
    \let\e@alloc@chardef\omathchardef
  \else                          % upTeX
    \chardef\e@alloc@top=65535
    \let\e@alloc@chardef\chardef
  \fi
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2015/01/01}%
                   {\e@alloc@chardef}{LaTeX2e original}%
\ifx\widowpenalties\@undefined
  \mathchardef\e@alloc@top=255
  \let\e@alloc@chardef\chardef
\else
  \mathchardef\e@alloc@top=32767
  \let\e@alloc@chardef\mathchardef
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}%
                   {\e@alloc@chardef}{LaTeX2e original}%
\let\e@alloc@top\@undefined
\let\e@alloc@chardef\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2016/11/29}%
                   {\e@mathgroup@top}{Extended Allocation (FAM256)}%
\ifx\omathchar\@undefined
  \chardef\e@mathgroup@top=16 % LaTeX2e kernel standard
\else
  \mathchardef\e@mathgroup@top=256 % for e-pTeX FAM256 patched
\fi
\plEndIncludeInRelease
\plIncludeInRelease{2015/01/01}%
                   {\e@mathgroup@top}{LaTeX2e original}%
\chardef\e@mathgroup@top=16
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}%
                   {\e@mathgroup@top}{LaTeX2e original}%
\let\e@mathgroup@top\@undefined
\plEndIncludeInRelease
\plIncludeInRelease{2017/04/08}{\document@default@language}%
                   {Save language for hyphenation}%
\ifx\document@default@language \@undefined
  \let\document@default@language\m@ne
\fi
\plEndIncludeInRelease
\plIncludeInRelease{0000/00/00}{\document@default@language}%
                   {Save language for hyphenation}%
\let\document@default@language\@undefined
\plEndIncludeInRelease
\endinput
%%
%% End of file `platexrelease.sty'.
