%%
%% This is file `lwarp-changes.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% lwarp.dtx  (with options: `changes')
%% This is a generated file.
%% Copyright 2016-2018 Brian Dunn
%% 
%% This work may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX
%% version 2005/12/01 or later.
\LWR@ProvidesPackagePass{changes}[2019/01/26]
\renewcommand{\ChangesListline}[4]{%
    \IfSubStr{\Changes@loc@show}{#1}{%
        \LWR@startpars%
        #2: #3 \qquad
        \nameref{autopage-#4}%
        \LWR@stoppars%
    }{}%
}

\renewcommand{\Changes@summaryline}[4]{%
    \IfSubStr{\Changes@loc@show}{#1}{%
        \ifthenelse{\not\equal{\Changes@loc@style}{compactsummary} \or #2 > 0}%
            {%
                #3:~#2#4%
            }{}%
    }{}%
}

\xpatchcmd{\listofchanges}
    {{\changesauthorname: \changesanonymousname}}
    {{\LWR@textcurrentcolor{\changesauthorname: \changesanonymousname}}}
    {}
    {\LWR@patcherror{changes}{listofchanges A}}

\xpatchcmd{\listofchanges}
    {\changesauthorname: \Changes@InID}
    {\LWR@textcurrentcolor{\changesauthorname: \Changes@InID}}
    {}
    {\LWR@patcherror{changes}{listofchanges B}}

\xpatchcmd{\listofchanges}
    {(\Changes@InName)}
    {\LWR@textcurrentcolor{(\Changes@InName)}}
    {}
    {\LWR@patcherror{changes}{listofchanges C}}

\xpatchcmd{\listofchanges}
    {\parbox{\Changes@summary@width}}
    {}
    {}
    {\LWR@patcherror{changes}{listofchanges D}}

\xpatchcmd{\Changes@Markup@comment}
    {%
        \ifthenelse{\isAnonymous{#2}}%
            {\textbf{[\arabic{Changes@commentCount#2}]:} }%
            {\textbf{[#3~\arabic{Changes@commentCount#2}]:} }%
        #1%
    }
    {%
        \LWR@textcurrentcolor{%         lwarp
        \ifthenelse{\isAnonymous{#2}}%
            {\textbf{[\arabic{Changes@commentCount#2}]:} }%
            {\textbf{[#3~\arabic{Changes@commentCount#2}]:} }%
        #1%
        }%                              lwarp
    }
    {}
    {\LWR@patcherror{changes}{\Changes@Markup@comment A}}

\xpatchcmd{\Changes@Markup@comment}
    {%
        \uwave{%
            \ifthenelse{\isAnonymous{#2}}%
                {\textbf{[\arabic{Changes@commentCount#2}]:} }%
                {\textbf{[#3~\arabic{Changes@commentCount#2}]:} }%
            #1%
        }%
    }
    {%
        \LWR@textcurrentcolor{%         lwarp
        \uwave{%
            \ifthenelse{\isAnonymous{#2}}%
                {\textbf{[\arabic{Changes@commentCount#2}]:} }%
                {\textbf{[#3~\arabic{Changes@commentCount#2}]:} }%
            #1%
        }%
        }%                              lwarp
    }
    {}
    {\LWR@patcherror{changes}{\Changes@Markup@comment B}}

\xpatchcmd{\Changes@output}
    {\Changes@Markup@author{\Changes@output@author{#2}{left}}}
    {\LWR@textcurrentcolor{\Changes@Markup@author{\Changes@output@author{#2}{left}}}}
    {}
    {\LWR@patcherror{changes}{Changes@output A}}

\xpatchcmd{\Changes@output}
    {%
        \ifthenelse{\equal{#1}{added}}{\Changes@Markup@added{#3}}{}%
        \ifthenelse{\equal{#1}{deleted}}{\Changes@Markup@deleted{#4}}{}%
        \ifthenelse{\equal{#1}{replaced}}{{\Changes@Markup@added{#3}}\allowbreak\Changes@Markup@deleted{#4}}{}%
        \ifthenelse{\equal{#1}{highlight}}{\Changes@Markup@highlight{#3}}{}%
    }
    {%
        \LWR@textcurrentcolor{%
        \ifthenelse{\equal{#1}{added}}{\Changes@Markup@added{#3}}{}%
        \ifthenelse{\equal{#1}{deleted}}{\Changes@Markup@deleted{#4}}{}%
        \ifthenelse{\equal{#1}{replaced}}{{\Changes@Markup@added{#3}}\allowbreak\Changes@Markup@deleted{#4}}{}%
        \ifthenelse{\equal{#1}{highlight}}{\Changes@Markup@highlight{#3}}{}%
        }%
    }
    {}
    {\LWR@patcherror{changes}{Changes@output B}}

\xpatchcmd{\Changes@output}
    {\Changes@Markup@author{\Changes@output@author{#2}{right}}}
    {\LWR@textcurrentcolor{\Changes@Markup@author{\Changes@output@author{#2}{right}}}}
    {}
    {\LWR@patcherror{changes}{Changes@output C}}
\endinput
%%
%% End of file `lwarp-changes.sty'.
