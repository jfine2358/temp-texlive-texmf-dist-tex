%
% pxpgfrcs.sty
% written by Hironobu Yamashita (@aminophen)
%
% This package is part of the plautopatch bundle.
% https://github.com/aminophen/plautopatch
%

%% package declaration
\NeedsTeXFormat{pLaTeX2e}
\ProvidesPackage{pxpgfrcs}
  [2018/09/21 v0.1]
\RequirePackage{pgfrcs}

% Note: I chose the name "pxpgfrcs.sty"
% (instead of "pgfutil-platex.def") because
% * "pgfrcs.sty" is the only package
%   which contains \input pgfutil-latex.def.
% * It is not common for LaTeX users to use
%   such an interface like \input pgfutil-platex.def.

% patch pgfutil-latex.def
\RequirePackage{pxeveryshi}% pgfutil-latex.def requires everyshi
\def\pgfutil@insertatbegincurrentpagefrombox#1{%
 \edef\pgf@temp{\the\wd\pgfutil@abb}%
 \global\setbox\pgfutil@abb\hbox{%
   \yoko %%% add \yoko
   \unhbox\pgfutil@abb%
   \hskip-\pgf@temp\relax%
   #1%
 }%
}%

\endinput
