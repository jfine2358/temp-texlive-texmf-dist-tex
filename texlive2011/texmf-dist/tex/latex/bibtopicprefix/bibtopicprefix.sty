%%
%% This is file `bibtopicprefix.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% bibtopicprefix.dtx  (with options: `package')
%% 
%% Copyright (c) 2006 by Martin Schroeder
%% 
%% This file is part of the BibTopicPrefix package
%% -----------------------------------------------
%% 
%% This work may be distributed and/or modified under the conditions of
%% the LaTeX Project Public License, either version 1.3 of this license
%% or (at your option) any later version.  The latest version of this
%% license is in
%%   http://www.latex-project.org/lppl.txt
%% and version 1.3 or later is part of all distributions of LaTeX version
%% 2005/12/01 or later.
%% 
%% This work has the LPPL maintenance status `maintained'.
%% 
%% The Current Maintainer of this work is Martin Schroeder.
%% 
%% This work consists of the files bibtopicprefix.dtx and
%% bibtopicprefix.ins and the derived file bibtopicprefix.sty
%% 
%%                         Martin Schroeder
%%                         Cruesemannallee 3
%%                         28213 Bremen
%%                         Germany
%%                         martin@oneiros.de
%% 
\NeedsTeXFormat{LaTeX2e}[1996/10/24]
\ProvidesPackage{bibtopicprefix}
         [2006/10/22 v1.10 BibTopicPrefix Package (MS)]
%% \CharacterTable
%% {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%%  Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%%  Digits        \0\1\2\3\4\5\6\7\8\9
%%  Exclamation   \!     Double quote  \"     Hash (number) \#
%%  Dollar        \$     Percent       \%     Ampersand     \&
%%  Acute accent  \'     Left paren    \(     Right paren   \)
%%  Asterisk      \*     Plus          \+     Comma         \,
%%  Minus         \-     Point         \.     Solidus       \/
%%  Colon         \:     Semicolon     \;     Less than     \<
%%  Equals        \=     Greater than  \>     Question mark \?
%%  Commercial at \@     Left bracket  \[     Backslash     \\
%%  Right bracket \]     Circumflex    \^     Underscore    \_
%%  Grave accent  \`     Left brace    \{     Vertical bar  \|
%%  Right brace   \}     Tilde         \~}
%%
\RequirePackage{scrlfile}
\RequirePackage[sectcntreset]{bibtopic}
\newcommand{\bibprefix}{}
\AfterPackage*{hyperref}{%
  \CheckCommand*{\@bibitem}[1]{%
    \@skiphyperreftrue\H@item\@skiphyperreffalse
    \Hy@raisedlink{%
      \hyper@anchorstart{cite.#1}\relax\hyper@anchorend}%
    \if@filesw
      \begingroup
        \let\protect\noexpand
        \immediate\write\@auxout{%
          \string\bibcite{#1}{%
            \the\value{\@listctr}}%
        }%
      \endgroup
    \fi
    \ignorespaces
    }%
  \renewcommand*{\@bibitem}[1]{%
    \@skiphyperreftrue\H@item\@skiphyperreffalse
    \Hy@raisedlink{%
      \hyper@anchorstart{cite.#1}\relax\hyper@anchorend}%
    \if@filesw
      \begingroup
        \let\protect\noexpand
        \immediate\write\@auxout{%
          \string\bibcite{#1}{%
            \bibprefix\the\value{\@listctr}}%
        }%
      \endgroup
    \fi
    \ignorespaces
    }%
  }%
\@ifpackageloaded{hyperref}{}{%
  \@ifpackageloaded{babel}
    {%
      \CheckCommand*{\org@@bibitem}[1]{%
        \item\if@filesw \immediate\write\@auxout
          {\string\bibcite{#1}{%
            \the\value{\@listctr}}}%
        \fi\ignorespaces
        }%
      \renewcommand*{\org@@bibitem}[1]{%
        \item\if@filesw \immediate\write\@auxout
          {\string\bibcite{#1}{%
            \bibprefix\the\value{\@listctr}}}%
        \fi\ignorespaces
        }%
    }{%
      \CheckCommand*{\@bibitem}[1]{%
        \item\if@filesw \immediate\write\@auxout
          {\string\bibcite{#1}{%
            \the\value{\@listctr}}}%
        \fi\ignorespaces
        }%
      \renewcommand*{\@bibitem}[1]{%
        \item\if@filesw \immediate\write\@auxout
          {\string\bibcite{#1}{%
            \bibprefix\the\value{\@listctr}}}%
        \fi\ignorespaces
        }%
    }%
  }
\renewcommand*{\@biblabel}[1]{[\bibprefix#1]}
\endinput
%%
%% End of file `bibtopicprefix.sty'.
