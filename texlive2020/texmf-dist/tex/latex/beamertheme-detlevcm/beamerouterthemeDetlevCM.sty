% Copyright 2015 Detlev Conrad Mielczarek
% Based on previous work by Herbert Voss (FU Berlin Theme) and Beamer Templates
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
\ProvidesPackage{beamerouterthemeDetlevCM}[2015/12/07 v 1.02 (dcm) http://detlevcm.eu ]

\mode<presentation>

\setlength\textwidth{\paperwidth}
\addtolength\textwidth{-30pt}
\setbeamersize{text margin left=15pt,text margin right=15pt}



%%% define height as relative to texwidth for 3:2 photographs
\newlength\DCM@image@height\setlength\DCM@image@height{0.223\textwidth} 
%%% Width of the image, 1.5x the height
\newlength\DCM@image@width\setlength\DCM@image@width{0.3345\textwidth}


% The logo for the top right corner
%% Old Value: 2.0em
\pgfdeclareimage[interpolate=true,height=1.7em]{logo}{LogoTop}

% 3 images as decoration
\pgfdeclareimage[interpolate=true,width=\the\DCM@image@width,height=\the\DCM@image@height]{Image1}{FS-img1}
\pgfdeclareimage[interpolate=true,width=\the\DCM@image@width,height=\the\DCM@image@height]{Image2}{FS-img2}
\pgfdeclareimage[interpolate=true,width=\the\DCM@image@width,height=\the\DCM@image@height]{Image3}{FS-img3}



\newlength\titlevsep\setlength\titlevsep{2mm}



\setbeamercolor{section in head/foot}{parent=palette tertiary}
\setbeamercolor{subsection in head/foot}{parent=palette secondary}
\setbeamercolor{author in head/foot}{parent=section in head/foot}
\setbeamercolor{title in head/foot}{parent=section in head/foot}
\setbeamercolor{date in head/foot}{parent=section in head/foot}



% Define the headline
\defbeamertemplate*{headline}{Leeds theme}
{%
  \begin{beamercolorbox}[colsep=1.5pt]{upper separation line head}
  \end{beamercolorbox}
%
  \begin{beamercolorbox}{section in head/foot}
    \vskip2pt\insertnavigation{\paperwidth}\vskip2pt
  \end{beamercolorbox}%
}



% Define the footline
\defbeamertemplate*{footline}{Leeds}
{%
	 \leavevmode%
	  \hbox{%
	  \begin{beamercolorbox}[wd=.33333\paperwidth,ht=2.25ex,dp=1ex,center]{author in head/foot}%
	    \usebeamerfont{author in head/foot}\insertshortauthor\expandafter\beamer@ifempty\expandafter{\beamer@shortinstitute}{}{~~(\insertshortinstitute)}
	  \end{beamercolorbox}%
	  \begin{beamercolorbox}[wd=.33333\paperwidth,ht=2.25ex,dp=1ex,center]{title in head/foot}%
	    \usebeamerfont{title in head/foot}\insertshorttitle
	  \end{beamercolorbox}%
	  \begin{beamercolorbox}[wd=.33333\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
	    \usebeamerfont{date in head/foot}%\insertshortdate{}\hspace*{2em}
	    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex} 
	  \end{beamercolorbox}
	}%
	\vskip0pt%
}



% Frame title
\defbeamertemplate*{frametitle}{Leeds}
{%
	\begin{beamercolorbox}[ht=1.6em,leftskip=15pt,rightskip=15pt,wd=\paperwidth]{section in head/foot}
	{%
		\usebeamerfont*{frametitle}
		\usebeamercolor[fg]{frametitle}
		\raisebox{0.3em}{\insertframetitle} % http://www.personal.ceu.hu/tex/spacebox.htm#raisebox
	 }
		\hfill
		\pgfuseimage{logo}
		\vspace{0.1em}
	\end{beamercolorbox}
}



% Sidebar - Switched off
\setbeamertemplate*{sidebar left}{}
\setbeamertemplate*{sidebar right}{}
\setbeamertemplate*{sidebar canvas left}{}
\setbeamertemplate*{sidebar canvas right}{}



\def\beamer@fteright{\vskip0.35cm\advance\leftskip by 1.7cm\advance\rightskip by1.7cm}




% From FU theme
% Frame title continuations, FU
\defbeamertemplate*{frametitle continuation}{DetlevCM}{\insertcontinuationcountroman}




\newcommand\fachbereich[1]{\def\insertfachbereich{#1}}
\fachbereich{}%

\defbeamertemplate*{title page}{DetlevCM}{%

%% New implemenation for blank frame title with only the logo
\frametitle{~}

%% pull up images a bit
\vspace{-1em}

%% Title Page Images - 3 Images side by side
\begingroup\fboxsep=0pt
	\pgfuseimage{Image1}
	\pgfuseimage{Image2}
	\pgfuseimage{Image3}
\endgroup
	
\par\vfill

{\usebeamerfont{title}\usebeamercolor[bg]{frametitle}\inserttitle}\\[\titlevsep]
  \ifx\insertsubtitle\@empty\else\vskip0.25em%
    {\usebeamerfont{subtitle}\insertsubtitle\par}%
  \fi%
  \par\vfill
  \begin{beamercolorbox}[sep=0pt]{author}
    {\usebeamerfont{author}\insertauthor}\\
    {\usebeamerfont{institute}\insertinstitute}
  \end{beamercolorbox}
  \par\vfill
  {
	\usebeamerfont{date}\usebeamercolor*[fg]{date}\insertdate
  }
	\par\vfill~\vspace*{-\fill}%
	
}% End of Title Page definition





\endinput


\mode<all>